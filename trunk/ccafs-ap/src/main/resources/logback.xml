<configuration>
  <contextName>CCAFS Activities</contextName>
  <property file="ccafsap.properties" />

  <!-- ======= Filters by levels to print logs in file ======= -->
  
  <appender name="FILE-TRACE" class="ch.qos.logback.core.FileAppender">
    <file>${log.folder}/ccafsap.log</file>
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} - %logger{0} [%-5level] : %msg%n</pattern>
    </encoder>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>TRACE</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
  </appender>

  <appender name="FILE-DEBUG" class="ch.qos.logback.core.FileAppender">
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>DEBUG</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
    <file>${log.folder}/ccafsap.log</file>
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} - %logger{0} [%-5level] : %msg%n</pattern>
    </encoder>
  </appender>

  <appender name="FILE-INFO" class="ch.qos.logback.core.FileAppender">
    <file>${log.folder}/ccafsap.log</file>
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} - %logger{0} [%-5level] : %msg%n</pattern>
    </encoder>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>INFO</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
  </appender>

  <appender name="FILE-WARN" class="ch.qos.logback.core.FileAppender">
    <file>${log.folder}/ccafsap.log</file>
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} - %logger{0} [%-5level] : %msg%n</pattern>
    </encoder>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>WARN</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
  </appender>

  <appender name="FILE-ERROR" class="ch.qos.logback.core.FileAppender">
    <file>${log.folder}/ccafsap.log</file>
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} - %logger{0} [%-5level] : %msg%n</pattern>
    </encoder>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>ERROR</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
  </appender>

  <!-- ======= Filters by levels to print logs in Console ======= -->
    
  <appender name="CONSOLE-TRACE" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} - %logger{0} [%-5level] : %msg%n</pattern>
    </encoder>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>TRACE</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
  </appender>
  
  <appender name="CONSOLE-DEBUG" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} - %logger{0} [%-5level] : %msg%n</pattern>
    </encoder>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>DEBUG</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
  </appender>

  <appender name="CONSOLE-INFO" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} - %logger{0} [%-5level] : %msg%n</pattern>
    </encoder>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>INFO</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
  </appender>

  <appender name="CONSOLE-WARN" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} - %logger{0} [%-5level] : %msg%n</pattern>
    </encoder>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>WARN</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
  </appender>

  <appender name="CONSOLE-ERROR" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} - %logger{0} [%-5level] : %msg%n</pattern>
    </encoder>
    <filter class="ch.qos.logback.classic.filter.LevelFilter">
      <level>ERROR</level>
      <onMatch>ACCEPT</onMatch>
      <onMismatch>DENY</onMismatch>
    </filter>
  </appender>

  <!-- ======= Attach the appenders according to the configuration properties ======= -->

  <root level="ALL">
    <if condition='property("log.console").equalsIgnoreCase("true")'>
	    <then>

	     <if condition='property("log.trace").equalsIgnoreCase("true")'>
        <then>
          <appender-ref ref="CONSOLE-TRACE"/>
		    </then>
	     </if>

	     <if condition='property("log.debug").equalsIgnoreCase("true")'> 
        <then>
          <appender-ref ref="CONSOLE-DEBUG"/>
		    </then>
	     </if>
		    
	     <if condition='property("log.info").equalsIgnoreCase("true")'> 
        <then>
          <appender-ref ref="CONSOLE-INFO"/>
		    </then>
	     </if>
		    
	     <if condition='property("log.warn").equalsIgnoreCase("true")'> 
        <then>
          <appender-ref ref="CONSOLE-WARN"/>
		    </then>
	     </if>
		    
	     <if condition='property("log.error").equalsIgnoreCase("true")'> 
        <then>
          <appender-ref ref="CONSOLE-ERROR"/>
		    </then>
	     </if>
		    
	    </then>
    </if>
    
    <if condition='property("log.file").equalsIgnoreCase("true")'> 
      <then>
       
       <!-- This appender always is active, is in charge of backup the logs  -->
       
       <if condition='property("log.trace").equalsIgnoreCase("true")'> 
        <then>
          <appender-ref ref="FILE-TRACE"/>
        </then>
       </if>

       <if condition='property("log.debug").equalsIgnoreCase("true")'> 
        <then>
          <appender-ref ref="FILE-DEBUG"/>
        </then>
       </if>

       <if condition='property("log.info").equalsIgnoreCase("true")'> 
        <then>
          <appender-ref ref="FILE-INFO"/>
        </then>
       </if>
        
       <if condition='property("log.warn").equalsIgnoreCase("true")'> 
        <then>
          <appender-ref ref="FILE-WARN"/>
        </then>
       </if>
        
       <if condition='property("log.error").equalsIgnoreCase("true")'> 
        <then>
          <appender-ref ref="FILE-ERROR"/>
        </then>
       </if>
        
      </then>
    </if>
  </root>
</configuration>