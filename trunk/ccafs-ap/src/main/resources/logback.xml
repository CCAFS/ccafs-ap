<configuration>
  <contextName>CCAFS Activities</contextName>
  <property file="ccafsap.properties" />

  <!-- ***************************************************************************** -->
  <!-- ccafsap-dev is a developer log file, just TRACE and DEBUG messages are showed --> 
  
  <appender name="DEVELOPER" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${log.folder}/ccafsap-dev.log</file>    
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} - %logger{0} [%-5level] : %msg%n</pattern>
    </encoder>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
      <!-- rollover daily -->
      <fileNamePattern>${log.folder}/ccafsap-dev-%d{yyyy-MM-dd}.%i.txt</fileNamePattern>
      <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
        <!-- or whenever the file size reaches 10MB -->
        <maxFileSize>10MB</maxFileSize>
      </timeBasedFileNamingAndTriggeringPolicy>
    </rollingPolicy>
  </appender>
   
  <!-- ************************************************************************* -->
  <!-- ccafsap is the general log file, INFO, WARN and ERROR messages are showed --> 
  
  <appender name="GENERAL" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${log.folder}/ccafsap.log</file>
    <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
      <level>INFO</level>
    </filter>
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} - %logger{0} [%-5level] : %msg%n</pattern>
    </encoder>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
      <!-- rollover daily -->
      <fileNamePattern>${log.folder}/ccafsap-%d{yyyy-MM-dd}.%i.txt</fileNamePattern>
      <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
        <!-- or whenever the file size reaches 10MB -->
        <maxFileSize>10MB</maxFileSize>
      </timeBasedFileNamingAndTriggeringPolicy>
    </rollingPolicy>
  </appender>
  
  
  <!-- ************************************************************************* -->
  <!-- This is a console log used to develop purposes --> 
  
  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} - %logger{0} [%-5level] : %msg%n</pattern>
    </encoder>
  </appender>
  
   
  <root level="ALL">
    <if condition='property("log.console").equalsIgnoreCase("true")'> 
	    <then>
        <appender-ref ref="STDOUT"/>
	    </then>
    </if>
    
    <if condition='property("log.general").equalsIgnoreCase("true")'> 
	    <then>
	      <appender-ref ref="GENERAL" />  
	    </then>
    </if>

    <if condition='property("log.developer").equalsIgnoreCase("true")'> 
	    <then>
			  <appender-ref ref="DEVELOPER" />  
	    </then>
    </if>
  </root>
</configuration>